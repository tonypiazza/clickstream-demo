# ==============================================================================
# Clickstream Pipeline - Aiven Configuration
# ==============================================================================
# Use this configuration with Aiven managed services.
#
# Recommended Setup (auto-generates this file):
#   1. cd terraform && terraform apply
#   2. clickstream config generate
#
# Manual Setup:
#   1. cd terraform && terraform apply
#   2. cp .env.aiven.example .env
#   3. Fill in values from 'terraform output'
#   4. Copy SSL certificates from Terraform outputs to certs/ directory
#   5. clickstream consumer start
#   6. clickstream producer start --limit 10000
# ==============================================================================

# ==============================================================================
# Producer Implementation
# ==============================================================================
# Options: confluent (default, fastest), kafka_python, quix
# - confluent: Uses librdkafka C library (recommended for performance)
# - kafka_python: Pure Python implementation
# - quix: Uses Quix Streams (requires: pip install -e ".[quix]")
PRODUCER_IMPL=confluent

# ==============================================================================
# Consumer Implementation
# ==============================================================================
# Options: confluent (default, fastest), kafka_python, quix, mage, bytewax
# - confluent: Uses librdkafka C library (recommended for performance)
# - kafka_python: Pure Python implementation
# - quix: Uses Quix Streams (requires: pip install -e ".[quix]")
# - mage: Uses Mage AI (requires: pip install -e ".[mage]")
# - bytewax: Uses Bytewax (requires: pip install -e ".[bytewax]")
CONSUMER_IMPL=confluent

# ==============================================================================
# Kafka Settings (Aiven)
# ==============================================================================
KAFKA_BOOTSTRAP_SERVERS=your-kafka-project.aivencloud.com:12345
# Aiven Kafka uses SSL with client certificates (mTLS)
KAFKA_SECURITY_PROTOCOL=SSL
KAFKA_SSL_CA_FILE=certs/aiven-ca.pem
KAFKA_SSL_CERT_FILE=certs/aiven-client.pem
KAFKA_SSL_KEY_FILE=certs/aiven-client.key

# Must match terraform.tfvars
KAFKA_EVENTS_TOPIC=clickstream-events
KAFKA_EVENTS_TOPIC_PARTITIONS=3

# ==============================================================================
# PostgreSQL Settings (Aiven)
# ==============================================================================
PG_HOST=your-pg-project.aivencloud.com
PG_PORT=12345
PG_USER=avnadmin
PG_PASSWORD=your-password-here

# Must match terraform.tfvars
PG_DATABASE=clickstream
PG_SCHEMA_NAME=clickstream
PG_SSLMODE=require

# ==============================================================================
# OpenSearch Settings (Aiven) - Optional
# Set opensearch_enabled=true in terraform.tfvars to provision
# ==============================================================================
OPENSEARCH_ENABLED=false
OPENSEARCH_HOST=your-opensearch-project.aivencloud.com
OPENSEARCH_PORT=443
OPENSEARCH_USER=avnadmin
OPENSEARCH_PASSWORD=your-password-here
OPENSEARCH_USE_SSL=true
OPENSEARCH_VERIFY_CERTS=true
OPENSEARCH_EVENTS_INDEX=clickstream-events
OPENSEARCH_CONSUMER_GROUP_ID=clickstream-opensearch

# ==============================================================================
# Valkey Settings (Aiven - Redis-compatible)
# ==============================================================================
VALKEY_HOST=your-valkey-project.aivencloud.com
VALKEY_PORT=12345
VALKEY_PASSWORD=your-password-here
VALKEY_SSL=true
VALKEY_SESSION_TTL_HOURS=24

# ==============================================================================
# Producer Settings
# ==============================================================================
PRODUCER_DATA_FILE=data/events.csv

# ==============================================================================
# PostgreSQL Consumer Settings
# ==============================================================================
POSTGRESQL_CONSUMER_GROUP_ID=clickstream-postgresql
POSTGRESQL_CONSUMER_SESSION_TIMEOUT_MINUTES=30
